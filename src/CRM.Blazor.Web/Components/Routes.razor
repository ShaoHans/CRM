@using CRM.Blazor.Web.Components.Layout
@using Microsoft.AspNetCore.Components.Authorization
@inject NavigationManager Nav


<Router AppAssembly="typeof(App).Assembly">
    <Found Context="routeData">
        <AuthorizeView>
            <Authorized>
                <RouteView RouteData="routeData" DefaultLayout="typeof(MainLayout)" />
            </Authorized>
            <NotAuthorized>
                @if ((context.User?.Identity?.IsAuthenticated ?? false) == false)
                {
                    Nav.NavigateTo("/login");
                }
                else
                {
                    <RadzenText TextStyle="TextStyle.DisplayH5" class="rz-my-12">
                        You are not authorized to access this resource!
                    </RadzenText>
                }
            </NotAuthorized>
        </AuthorizeView>
    </Found>
    <NotFound>
        <LayoutView Layout="typeof(MainLayout)">
            <RadzenText TextStyle="TextStyle.DisplayH1" TagName="TagName.H1" class="rz-my-12">
                Page not found
            </RadzenText>
            <RadzenText TextStyle="TextStyle.DisplayH5" class="rz-my-12">
                Sorry, but there's nothing here!
            </RadzenText>
        </LayoutView>
    </NotFound>
</Router>
